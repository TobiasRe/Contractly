@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	* {
		@apply border-faint;
	}

	body {
		@apply text-foreground;
		font-feature-settings: 'tnum';
		background:
			radial-gradient(circle at 14% 8%, rgba(182, 163, 255, 0.42), transparent 42%),
			radial-gradient(circle at 86% 14%, rgba(146, 194, 255, 0.45), transparent 38%),
			linear-gradient(135deg, #f1ecff 0%, #e5eeff 54%, #dbe7ff 100%);
		min-height: 100vh;
	}

	body::before {
		content: '';
		position: fixed;
		inset: 0;
		z-index: -1;
		pointer-events: none;
		background:
			linear-gradient(160deg, rgba(255, 255, 255, 0.32), rgba(255, 255, 255, 0)),
			radial-gradient(circle at 50% 100%, rgba(110, 125, 255, 0.08), transparent 56%);
		backdrop-filter: blur(2px);
	}

	input[type='number'] {
		font-variant-numeric: tabular-nums;
	}

	/* Prevent iOS Safari focus-zoom on form fields in PWA mode */
	@media (hover: none) and (pointer: coarse) {
		input,
		select,
		textarea {
			font-size: 16px;
		}
	}
}

@layer components {
	.btn-primary {
		@apply min-h-[48px] min-w-[200px] rounded-xl px-8 py-3 text-base font-medium text-white transition-all;
		background: linear-gradient(140deg, rgba(141, 123, 255, 0.96), rgba(92, 149, 255, 0.96));
		border: 1px solid rgba(255, 255, 255, 0.5);
		box-shadow:
			0 14px 28px -20px rgba(83, 96, 233, 0.8),
			inset 0 1px 0 rgba(255, 255, 255, 0.35);
	}

	.btn-primary:hover {
		filter: brightness(1.04);
		transform: translateY(-1px);
	}

	.btn-primary:active {
		filter: brightness(0.98);
		transform: translateY(0);
	}

	.btn-secondary {
		@apply min-h-[48px] min-w-[200px] rounded-xl px-8 py-3 text-base font-medium text-foreground transition-all;
		background: rgba(255, 255, 255, 0.46);
		border: 1px solid rgba(255, 255, 255, 0.56);
		backdrop-filter: blur(14px) saturate(150%);
	}

	.btn-secondary:hover {
		background: rgba(255, 255, 255, 0.62);
	}

	.input {
		@apply h-12 rounded-xl px-4 text-foreground outline-none transition-all;
		background: rgba(255, 255, 255, 0.52);
		border: 1px solid rgba(255, 255, 255, 0.62);
		backdrop-filter: blur(10px);
	}

	.input::placeholder {
		@apply text-muted;
	}

	.input:focus {
		border-color: rgba(120, 134, 255, 0.78);
		box-shadow:
			0 0 0 4px rgba(113, 127, 255, 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 0.42);
	}

	.card {
		@apply rounded-2xl p-5;
		background: linear-gradient(160deg, rgba(255, 255, 255, 0.62), rgba(255, 255, 255, 0.34));
		border: 1px solid rgba(255, 255, 255, 0.58);
		backdrop-filter: blur(18px) saturate(165%);
		box-shadow:
			0 18px 30px -24px rgba(68, 79, 173, 0.4),
			inset 0 1px 0 rgba(255, 255, 255, 0.45);
	}

	.page-shell {
		@apply min-h-screen pb-20;
	}

	.glass-header {
		@apply sticky top-0 z-10;
		background: rgba(245, 247, 255, 0.6);
		border-bottom: 1px solid rgba(255, 255, 255, 0.6);
		backdrop-filter: blur(20px) saturate(160%);
	}

	.glass-section {
		@apply rounded-2xl;
		background: rgba(255, 255, 255, 0.34);
		border: 1px solid rgba(255, 255, 255, 0.5);
		backdrop-filter: blur(14px) saturate(145%);
	}

	.glass-chip {
		@apply rounded-full px-3 py-1 text-xs font-semibold;
		background: rgba(255, 255, 255, 0.46);
		border: 1px solid rgba(255, 255, 255, 0.58);
	}

	.glass-toggle {
		@apply rounded-xl px-4 py-2 font-medium whitespace-nowrap transition-all;
		background: rgba(255, 255, 255, 0.44);
		border: 1px solid rgba(255, 255, 255, 0.6);
	}

	.glass-toggle-active {
		@apply text-white;
		background: linear-gradient(140deg, rgba(138, 122, 255, 0.95), rgba(98, 148, 255, 0.95));
		border-color: rgba(255, 255, 255, 0.64);
		box-shadow: 0 12px 20px -18px rgba(67, 86, 214, 0.88);
	}

	.app-frame {
		@apply mx-auto w-full max-w-[1280px] md:p-8;
		padding-top: env(safe-area-inset-top);
		padding-left: 0;
		padding-right: 0;
		padding-bottom: 0;
	}

	@media (min-width: 768px) {
		.app-frame {
			padding-top: 2rem;
		}
	}

	.app-shell {
		@apply rounded-none md:grid md:min-h-[calc(100vh-4rem)] md:grid-cols-[250px_1fr] md:gap-4 md:p-3 md:rounded-[28px];
		min-height: calc(100dvh - env(safe-area-inset-top));
		background: linear-gradient(170deg, rgba(255, 255, 255, 0.42), rgba(255, 255, 255, 0.24));
		border: 0;
		backdrop-filter: blur(22px) saturate(170%);
		box-shadow:
			inset 0 1px 0 rgba(255, 255, 255, 0.85),
			0 30px 48px -35px rgba(76, 90, 200, 0.45);
	}

	@media (min-width: 768px) {
		.app-shell {
			min-height: calc(100vh - 4rem);
			border: 1px solid rgba(255, 255, 255, 0.52);
		}

		.workspace-panel {
			border: 1px solid rgba(255, 255, 255, 0.52);
		}
	}

	.sidebar-panel {
		@apply rounded-2xl px-4 py-4;
		background: rgba(255, 255, 255, 0.4);
		border: 1px solid rgba(255, 255, 255, 0.52);
		backdrop-filter: blur(18px) saturate(160%);
		gap: 0.5rem;
	}

	.brand-row {
		@apply mb-5 flex items-center gap-2 text-lg;
	}

	.menu-caption {
		@apply mb-2 px-2 text-[11px] font-semibold tracking-wide text-muted;
	}

	.sidebar-link {
		@apply flex items-center gap-2 rounded-xl border px-3 py-2 text-sm text-secondary transition-all;
		border-color: transparent;
	}

	.sidebar-link:hover {
		@apply text-foreground;
		background: rgba(255, 255, 255, 0.54);
		border-color: rgba(255, 255, 255, 0.6);
	}

	.sidebar-link-active {
		@apply text-foreground;
		background: linear-gradient(145deg, rgba(255, 255, 255, 0.62), rgba(245, 249, 255, 0.5));
		border-color: rgba(255, 255, 255, 0.64);
		box-shadow: 0 12px 20px -18px rgba(74, 92, 204, 0.56);
	}

	.workspace-panel {
		@apply relative overflow-hidden rounded-none md:rounded-2xl;
		background: rgba(255, 255, 255, 0.3);
		border: 0;
		backdrop-filter: blur(16px) saturate(165%);
	}

	.topbar-panel {
		@apply items-center justify-between gap-3 p-3;
		border-bottom: 1px solid rgba(255, 255, 255, 0.54);
	}

	.top-search {
		@apply flex max-w-md items-center gap-2 rounded-full px-3 py-2;
		background: rgba(255, 255, 255, 0.6);
		border: 1px solid rgba(255, 255, 255, 0.6);
		backdrop-filter: blur(10px);
		box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.95);
	}

	.top-search input {
		@apply w-full bg-transparent text-sm text-foreground placeholder:text-muted outline-none;
	}

	.language-switch {
		@apply inline-flex items-center rounded-full p-1;
		background: rgba(255, 255, 255, 0.56);
		border: 1px solid rgba(255, 255, 255, 0.62);
		backdrop-filter: blur(8px);
	}

	.language-switch button {
		@apply rounded-full px-3 py-1.5 text-xs font-medium text-secondary transition-colors;
	}

	.language-switch button.active {
		@apply text-white;
		background: linear-gradient(140deg, rgba(137, 122, 255, 0.96), rgba(96, 147, 255, 0.96));
	}

	.dashboard-shell {
		@apply relative space-y-5 rounded-2xl p-4;
		background: rgba(255, 255, 255, 0.2);
		border: 1px solid rgba(255, 255, 255, 0.38);
		backdrop-filter: blur(14px);
	}

	.dashboard-hero {
		@apply rounded-2xl px-4 py-4;
		background: linear-gradient(145deg, rgba(255, 255, 255, 0.66), rgba(247, 250, 255, 0.42));
		border: 1px solid rgba(255, 255, 255, 0.58);
		backdrop-filter: blur(16px);
		box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9);
	}

	.stat-tile {
		@apply relative overflow-hidden;
		background: linear-gradient(170deg, rgba(255, 255, 255, 0.68), rgba(247, 250, 255, 0.44));
		border: 1px solid rgba(255, 255, 255, 0.56);
		backdrop-filter: blur(14px);
	}

	.stat-tile::after {
		content: '';
		position: absolute;
		inset: 0;
		background: linear-gradient(135deg, rgba(139, 159, 255, 0.11), rgba(139, 159, 255, 0));
		pointer-events: none;
	}

	.stat-tile-primary {
		background: linear-gradient(170deg, rgba(241, 236, 255, 0.84), rgba(228, 239, 255, 0.58));
	}

	.stat-icon-chip {
		@apply inline-flex h-8 w-8 items-center justify-center rounded-lg text-secondary;
		background: rgba(255, 255, 255, 0.54);
		border: 1px solid rgba(255, 255, 255, 0.62);
	}

	.deadline-card {
		@apply transition-all;
		background: linear-gradient(170deg, rgba(255, 255, 255, 0.66), rgba(246, 248, 255, 0.42));
		border: 1px solid rgba(255, 255, 255, 0.56);
		backdrop-filter: blur(14px);
	}

	.deadline-card:hover {
		border-color: rgba(255, 255, 255, 0.74);
		transform: translateY(-1px);
		box-shadow: 0 12px 20px -20px rgba(72, 88, 192, 0.62);
	}

	.deadline-date-pill {
		@apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold text-warning;
		background: rgba(255, 232, 200, 0.52);
		border: 1px solid rgba(255, 255, 255, 0.58);
	}

	.metric-bar {
		@apply h-1.5 w-full overflow-hidden rounded-full;
		background: rgba(198, 208, 250, 0.5);
	}

	.metric-fill {
		@apply block h-full rounded-full;
	}

	.metric-fill-primary {
		background: linear-gradient(90deg, rgba(129, 122, 255, 0.92), rgba(104, 162, 255, 0.78));
	}

	.metric-fill-warning {
		background: linear-gradient(90deg, rgba(255, 171, 76, 0.86), rgba(255, 209, 126, 0.72));
	}

	.onboarding-shell {
		@apply relative;
		background-image: linear-gradient(170deg, rgba(255, 255, 255, 0.68), rgba(244, 248, 255, 0.4));
		border: 1px solid rgba(255, 255, 255, 0.58);
		backdrop-filter: blur(18px) saturate(160%);
	}

	.onboarding-step {
		@apply flex items-center gap-3 rounded-xl p-3 shadow-subtle transition-all;
		background: rgba(255, 255, 255, 0.54);
		border: 1px solid rgba(255, 255, 255, 0.6);
		backdrop-filter: blur(12px);
	}

	.onboarding-step:hover {
		background: rgba(255, 255, 255, 0.68);
		border-color: rgba(255, 255, 255, 0.74);
		transform: translateY(-1px);
	}

	.floating-add-btn {
		background: linear-gradient(145deg, rgba(137, 121, 255, 0.98), rgba(97, 147, 255, 0.98));
		border: 1px solid rgba(255, 255, 255, 0.6);
		backdrop-filter: blur(12px) saturate(170%);
		box-shadow:
			0 16px 26px -18px rgba(76, 96, 216, 0.8),
			0 0 0 5px rgba(236, 242, 255, 0.74);
	}

	.floating-add-btn:hover {
		filter: brightness(1.05);
	}
}
